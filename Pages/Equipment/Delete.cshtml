@page
@model Proyecto_Laboratorios_Univalle.Pages.Equipment.DeleteModel

@{
    ViewData["Title"] = "Delete Equipment";
}

<div class="container mt-4">
    <div class="alert alert-warning" role="alert">
        <h4 class="alert-heading">
            <i class="fas fa-exclamation-triangle"></i> Are you sure you want to delete this equipment?
        </h4>
        <p>This action will mark the equipment as <strong>"Deleted"</strong> but will NOT remove it from the database. History and maintenance logs will be preserved.</p>
        <hr>
        <p class="mb-0">The equipment will no longer appear in active lists but can still be queried in history.</p>
    </div>

    <div class="card">
        <div class="card-header bg-danger text-white">
            <h4 class="mb-0"><i class="fas fa-trash-alt"></i> Equipment Information</h4>
        </div>
        <div class="card-body">
            <dl class="row">
                <dt class="col-sm-3">Name:</dt>
                <dd class="col-sm-9"><strong>@Html.DisplayFor(model => model.Equipment.Name)</strong></dd>

                <dt class="col-sm-3">Inventory N°:</dt>
                <dd class="col-sm-9">
                    <span class="badge badge-secondary">@Html.DisplayFor(model => model.Equipment.InventoryNumber)</span>
                </dd>

                <dt class="col-sm-3">Type:</dt>
                <dd class="col-sm-9">@Html.DisplayFor(model => model.Equipment.EquipmentType.Name)</dd>

                <dt class="col-sm-3">Laboratory:</dt>
                <dd class="col-sm-9">@Html.DisplayFor(model => model.Equipment.Laboratory.Name)</dd>

                <dt class="col-sm-3">Current Status:</dt>
                <dd class="col-sm-9">
                     @Html.DisplayFor(model => model.Equipment.CurrentStatus)
                </dd>

                @if (!string.IsNullOrEmpty(Model.Equipment.Brand))
                {
                    <dt class="col-sm-3">Brand/Model:</dt>
                    <dd class="col-sm-9">@Model.Equipment.Brand @Model.Equipment.Model</dd>
                }

                @if (!string.IsNullOrEmpty(Model.Equipment.SerialNumber))
                {
                    <dt class="col-sm-3">Serial Number:</dt>
                    <dd class="col-sm-9">@Html.DisplayFor(model => model.Equipment.SerialNumber)</dd>
                }

                @if (Model.Equipment.AcquisitionValue.HasValue)
                {
                    <dt class="col-sm-3">Acquisition Value:</dt>
                    <dd class="col-sm-9">@Model.Equipment.AcquisitionValue.Value.ToString("C")</dd>
                }

                <dt class="col-sm-3">Origin:</dt>
                <dd class="col-sm-9">
                    @Html.DisplayFor(model => model.Equipment.City.Name),
                    @Html.DisplayFor(model => model.Equipment.Country.Name)
                </dd>

                @if (!string.IsNullOrEmpty(Model.Equipment.Observations))
                {
                    <dt class="col-sm-3">Observations:</dt>
                    <dd class="col-sm-9">@Html.DisplayFor(model => model.Equipment.Observations)</dd>
                }
            </dl>
        </div>
    </div>

    <form method="post" class="mt-3">
        <input type="hidden" asp-for="Equipment.Id" />

        <div class="btn-group" role="group">
            <button type="submit" class="btn btn-danger btn-lg">
                <i class="fas fa-check"></i> Confirm Delete
            </button>
            <a asp-page="./Details" asp-route-id="@Model.Equipment.Id" class="btn btn-info btn-lg">
                <i class="fas fa-eye"></i> View Details
            </a>
            <a asp-page="./Index" class="btn btn-secondary btn-lg">
                <i class="fas fa-times"></i> Cancel
            </a>
        </div>
    </form>
</div>

@section Scripts {
    <script>
        document.querySelector('form').addEventListener('submit', function(e) {
            if (!confirm('Are you completely sure you want to delete this equipment?')) {
                e.preventDefault();
            }
        });
    </script>
}